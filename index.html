<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlowSkin - Diskusi Produk</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>

    <style>
        :root {
            --primary-bg: #fdfbf7;
            --text-dark: #333333;
            --text-light: #666666;
            --accent-toner: #9e8fb2;
            --accent-toner-dark: #7a6b8e;
            --accent-serum: #e6a4a4;
            --accent-serum-dark: #cf7878;
            --accent-me: #4caf50;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
            --transition: all 0.3s ease;
            --bright-gradient: linear-gradient(45deg, #FF6B6B, #FF8E53);
            --admin-color: #FF9800;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body { font-family: 'Poppins', sans-serif; background-color: var(--primary-bg); color: var(--text-dark); line-height:1.6; min-height: 100vh; display: flex; flex-direction: column; }

        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* --- HEADER --- */
        header { 
            background-color: var(--white); 
            padding: 1rem 5%; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
            position: sticky; 
            top: 0; 
            z-index: 1000; /* Dasar layer */
        }

        .logo { font-size: 1.5rem; font-weight: 700; color: var(--text-dark); display: flex; align-items: center; gap: 10px; cursor: pointer; }
        
        .header-right { display: flex; align-items: center; gap: 1.2rem; }
        
        /* Desktop Nav */
        nav.desktop-nav { display: flex; gap:1.2rem; align-items: center; }

        /* Tombol Menu HP */
        .mobile-menu-btn { 
            display: none; 
            font-size: 1.5rem; 
            color: var(--text-dark); 
            cursor: pointer; 
            background: none; 
            border: none; 
            z-index: 1003; /* Lebih tinggi dari backdrop */
            position: relative;
        }

        /* Link Styles */
        .nav-link { text-decoration: none; color: var(--text-light); font-weight: 600; cursor: pointer; transition: var(--transition); font-size: 0.9rem; }
        .nav-link:hover { color: var(--text-dark); }

        /* BUTTONS AUTH */
        .auth-btn {
            background: var(--white); border: 1px solid #ddd; padding: 8px 20px; 
            border-radius: 50px; cursor: pointer; font-weight: 600; color: var(--text-light); 
            transition: var(--transition); font-size: 0.9rem; white-space: nowrap;
        }
        .auth-btn:hover { border-color: var(--accent-me); color: var(--accent-me); }
        
        .user-profile { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; font-weight: 600; color: var(--text-dark); white-space: nowrap; }
        .logout-btn { color: #ff4d4d; cursor: pointer; border: none; background: none; font-size: 0.9rem; }
        .logout-btn:hover { text-decoration: underline; }

        /* --- SIDE DRAWER MENU --- */
        .backdrop {
            position: fixed; inset: 0; background: rgba(0,0,0,0.5); 
            z-index: 1001; display: none; opacity: 0; transition: opacity 0.3s;
        }
        .backdrop.active { display: block; opacity: 1; }

        .side-drawer {
            position: fixed; top: 0; right: -300px;
            width: 280px; height: 100vh;
            background: var(--white);
            z-index: 1002;
            padding-top: 80px; 
            transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: -5px 0 15px rgba(0,0,0,0.1);
            display: flex; flex-direction: column;
        }
        .side-drawer.active { right: 0; }

        .drawer-close-btn {
            position: absolute; top: 1.2rem; right: 5%; 
            font-size: 1.5rem; color: var(--text-dark); cursor: pointer;
        }

        /* Item Menu Berurutan (List) */
        .drawer-menu-list { list-style: none; padding: 0; margin: 0; }
        .drawer-item {
            display: block;
            padding: 15px 25px; font-size: 1.1rem; font-weight: 600; color: var(--text-dark);
            text-decoration: none; border-bottom: 1px solid #f0f0f0; transition: var(--transition);
        }
        .drawer-item:hover { background: #f9f9f9; color: var(--accent-toner); padding-left: 30px; }
        .drawer-item i { margin-right: 12px; width: 20px; text-align: center; }

        /* --- HOME PAGE SECTIONS --- */
        
        /* 1. INTRO SECTION (Paling Atas - Padding Diperbesar) */
        .hero-intro {
            background: linear-gradient(135deg, #fdfbf7 0%, #e6e6fa 100%);
            padding: 4rem 1rem 3rem; /* Dari 3.5rem jadi 4rem agar lega */
            text-align: center;
        }
        .hero-intro h1 { font-size: 3rem; font-weight: 800; color: var(--text-dark); margin-bottom: 1rem; }
        .hero-intro h1 span { color: var(--accent-toner); }
        .hero-intro p { font-size: 1.2rem; color: var(--text-light); max-width: 700px; margin: 0 auto 2rem; }
        .btn-scroll {
            padding: 12px 30px; background: var(--text-dark); color: white; border: none; border-radius: 50px;
            font-size: 1rem; font-weight: 600; cursor: pointer; transition: var(--transition);
            display: inline-block;
        }
        .btn-scroll:hover { background: var(--accent-toner); transform: scale(1.05); }

               /* 2. SELECTION SECTION (Tengah) */
        .section-title { text-align: center; font-size: 2rem; margin: 4rem 0 2rem; color: var(--text-dark); }
        .selection-container { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; padding: 0 5%; max-width: 1200px; margin: 0 auto 4rem; flex-grow: 1; }
        
        /* Kartu Produk: Image Background dengan Teks Overlay */
        .card { 
            background: var(--white); 
            border-radius: 20px; 
            overflow: hidden; 
            box-shadow: var(--shadow); 
            transition: var(--transition); 
            cursor: pointer; 
            border: 1px solid transparent; 
            position: relative;
            height: 400px; /* Tinggi kartu fix biar rapi */
        }
        
        .card:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.15); }
        .toner-card:hover { border-color: var(--accent-toner); }
        .serum-card:hover { border-color: var(--accent-serum); }

        /* --- UPDATE UKURAN GAMBAR (1022x818) --- */
        .card-image { 
            width: 100%;
            /* Hitung Aspek Rasio: 818 / 1022 = 0.80 (80%) */
            padding-bottom: 80%; 
            height: 0; /* Ini wajib dijadiin 0 supaya padding menentukan tingginya */
            position: relative; 
            overflow: hidden;
        } 
        .card-image img { 
            position: absolute;
            top: 0; left: 0; 
            width: 100%; 
            height: 100%; 
            object-fit: cover; /* Ini biar gak gepeng tapi full */
            transition: transform 0.5s ease; 
        } 
        /* Zoom effect saat hover */
        .card:hover .card-image img { transform: scale(1.1); } 
        
        /* Isi Teks di tengah (Overlay) */
        .card-content { 
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            padding: 2rem; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            text-align: center; 
            background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.2) 40%, rgba(0,0,0,0) 100%);
            z-index: 2;
        }

        /* Teks Putih untuk Kontras Gambar */
        .card h2 { font-size: 2rem; margin-bottom: 0.5rem; color: var(--white); text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .card p { font-size: 1rem; color: #f0f0f0; margin-bottom: 1.5rem; }
        .card-icon { font-size: 2.5rem; margin-bottom: 1rem; display: block; color: var(--white); text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        
        .btn-card { 
            display: inline-block; 
            padding: 10px 25px; 
            border-radius: 50px; 
            color: white; 
            font-weight: 600; 
            text-decoration: none; 
            transition: var(--transition); 
            background-color: var(--accent-toner);
            z-index: 10;
        }
        .toner-card .btn-card { background-color: var(--accent-toner); }
        .serum-card .btn-card { background-color: var(--accent-serum); }

        /* 3. LAB SECTION (DIJADIKAN 2 SELECTION CLICKABLE) */
        .lab-section { 
            padding: 4rem 5%; /* Dari 2.5rem jadi 4rem agar lega */
            background: var(--white); 
            margin-bottom: 4rem; 
        }
        .lab-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; /* Paksa 2 kolom agar jelas pilihannya */
            gap: 2rem; 
            max-width: 1000px; 
            margin: 2rem auto 0; 
        }
        
        /* Kartu Lab Besar (Clickable) */
        .lab-item { 
            background: var(--white); 
            padding: 2rem; 
            border: 1px solid #eee; 
            border-radius: 20px; 
            text-align: center; 
            transition: var(--transition); 
            cursor: pointer; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center;
            box-shadow: var(--shadow);
            height: 250px; /* Tinggi fixed agar rapi */
            position: relative; 
            overflow: hidden;
        }
        
        /* Efek Hover */
        .lab-item:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 15px 35px rgba(0,0,0,0.12); 
        }
        .toner-lab-item:hover { border-color: var(--accent-toner); }
        .serum-lab-item:hover { border-color: var(--accent-serum); }
        
        /* Gambar Background Kartu Lab */
        .lab-bg-img {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover; opacity: 0.1; z-index: 1; /* Gambar tipis dibelakang */
        }
        .lab-item:hover .lab-bg-img { opacity: 0.2; }

        .lab-icon { font-size: 3rem; margin-bottom: 1rem; z-index: 2; position: relative; }
        .toner-lab-item .lab-icon { color: var(--accent-toner); }
        .serum-lab-item .lab-icon { color: var(--accent-serum); }
        
        .lab-item h3 { margin-bottom: 0.5rem; font-size: 1.5rem; z-index: 2; position: relative; }
        .lab-item p { font-size: 1rem; color: var(--text-light); z-index: 2; position: relative; }
        
        .btn-lab-view {
            margin-top: auto; /* Dorong ke bawah */
            z-index: 3;
            padding: 10px 25px; 
            border-radius: 50px; 
            border: 2px solid; 
            font-weight: 700; 
            cursor: pointer; 
            transition: var(--transition);
        }
        .toner-lab-item .btn-lab-view { color: var(--accent-toner); border-color: var(--accent-toner); }
        .toner-lab-item .btn-lab-view:hover { background: var(--accent-toner); color: white; }
        
        .serum-lab-item .btn-lab-view { color: var(--accent-serum); border-color: var(--accent-serum); }
        .serum-lab-item .btn-lab-view:hover { background: var(--accent-serum); color: white; }

        /* 4. TESTIMONI SECTION (Padding Diperbesar) */
        .testi-section { 
            padding: 4rem 5%; /* Dari 2.5rem jadi 4rem agar lega */
            max-width: 1200px; 
            margin: 0 auto; 
        }
        .testi-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-top: 2rem; }
        .testi-card { background: var(--white); padding: 2rem; border-radius: 15px; box-shadow: var(--shadow); text-align: center; }
        .testi-avatar { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; margin-bottom: 1rem; border: 3px solid var(--accent-serum); }
        .testi-text { font-style: italic; color: #555; margin-bottom: 1rem; }
        .testi-name { font-weight: 700; color: var(--text-dark); }
        
        /* --- AUTH FORMS --- */
        .auth-container {
            max-width: 400px; margin: 4rem auto; padding: 2rem;
            background: var(--white); border-radius: 20px; box-shadow: var(--shadow); text-align: center;
        }
        .auth-container h2 { margin-bottom: 1.5rem; color: var(--accent-toner-dark); }
        .form-group { margin-bottom: 1.2rem; text-align: left; }
        .form-label { display: block; margin-bottom: 0.5rem; font-weight: 600; font-size: 0.9rem; }
        .form-input { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 10px; font-family: 'Poppins', sans-serif; font-size: 0.95rem; transition: var(--transition); }
        .form-input:focus { outline: none; border-color: var(--accent-toner); box-shadow: 0 0 0 3px rgba(158, 143, 178, 0.2); }
        
        .primary-btn { width: 100%; padding: 12px; background: var(--accent-toner); color: white; border: none; border-radius: 50px; font-weight: 700; cursor: pointer; transition: var(--transition); font-size: 1rem; }
        .primary-btn:hover { background: var(--accent-toner-dark); transform: translateY(-2px); }
        .auth-switch { margin-top: 1rem; font-size: 0.9rem; }
        .auth-switch a { color: var(--accent-toner); font-weight: 600; text-decoration: none; cursor: pointer; }

        /* --- PRODUCT & FORUM --- */
        .product-page { padding: 2rem 5%; max-width: 1200px; margin: 0 auto 4rem; flex-grow: 1; }
        .detail-container { display: flex; flex-wrap: wrap; background: var(--white); border-radius: 30px; overflow: hidden; box-shadow: var(--shadow); }
        .detail-image { 
            flex: 1 1 400px; 
            min-height: 500px; /* Tinggi minimal */
            height: auto; /* Biar tumbuh sesuai konten */
            position: relative; 
            background: #fff;
            padding: 10px; /* Gap biar rapi */
        } 
        .detail-image img { width: 100%; height: 100%; object-fit: cover; }
        .detail-content { flex: 1 1 400px; padding: 3rem; display: flex; flex-direction: column; justify-content: center; }
        .back-btn { display: inline-flex; align-items: center; gap: 8px; margin-bottom: 1.5rem; color: var(--text-light); text-decoration: none; font-weight: 600; cursor: pointer; transition: var(--transition); }
        .back-btn:hover { color: var(--text-dark); transform: translateX(-5px); }
        .detail-content h2 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        .detail-price { font-size: 1.5rem; font-weight: 700; margin-bottom: 2rem; display: block; }
        .detail-desc { color: var(--text-light); margin-bottom: 2rem; line-height: 1.8; }
        .feature-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; margin-bottom: 2.5rem; }
        .feature-item { display: flex; align-items: center; gap: 10px; font-weight: 500; }
        .action-btn { width: 100%; padding: 15px; border: none; border-radius: 50px; color: rgb(0, 0, 0); font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: var(--transition); text-align: center; display: block; }
        .action-btn:hover { opacity: 0.9; transform: scale(1.02); }

                /* --- LAB DETAIL SPECIFIC STYLES --- */
        
        /* Grid Foto - DIUBAH AGAR AUTO HEIGHT (TIDAK CROP) */
        .lab-photo-grid {
            display: flex;
            flex-direction: column; /* Numpuk ke bawah */
            gap: 10px; /* Jarak antar container */
            height: 100%;
            overflow-y: auto; /* Scroll jika melebihi ketinggian layar */
            padding: 10px;
            background-color: #f9f9f9;
            align-items: center; /* Center gambar */
        }
        
        .lab-photo-item {
            width: 100%;
            /* HILANGKAN HEIGHT FIX */
            height: auto; /* Tinggi mengikuti isi gambar (396px, 156px, dll) */
            position: relative; 
            border-radius: 15px;
            overflow: hidden;
            cursor: pointer;
            border: 2px solid transparent;
            transition: var(--transition);
            margin-bottom: 20px; /* Jarak untuk caption di bawah */
            max-width: 600px; /* Batasi lebar maksimal agar rapi */
        }

        .lab-photo-item:hover { border-color: var(--accent-toner); }
        
        .lab-photo-item img {
            width: 100%; 
            /* HILANGKAN HEIGHT FIX */
            height: auto; /* Penting agar tidak crop */
            object-fit: contain; /* Pastikan gambar terlihat penuh */
            display: block; 
            transition: transform 0.3s;
        }
        .lab-photo-item:hover img { transform: scale(1.02); } /* Sedikit zoom efek */

        /* Keterangan Foto (Caption) */
        .lab-photo-caption {
            /* DIUBAH: Tidak lagi overlap negatif, tapi ada margin positif */
            margin-top: 10px; 
            z-index: 2;
            position: relative;
            background: rgba(255,255,255, 0.95);
            padding: 8px 15px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 700;
            color: var(--text-dark);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            width: max-content;
            text-align: center;
            border: 1px solid #eee;
        }

        /* Tabel Hasil Lab */
        .lab-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
            border: 1px solid #eee;
            border-radius: 10px;
            overflow: hidden;
            font-size: 0.9rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }
        .lab-table th {
            background-color: var(--primary-bg); /* Match theme */
            color: var(--text-dark);
            font-weight: 700;
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid #ddd;
        }
        .lab-table td {
            padding: 10px 12px;
            border-bottom: 1px solid #eee;
            color: var(--text-light);
        }
        .lab-table tr:last-child td { border-bottom: none; }
        .lab-table td.result-pass { color: var(--accent-me); font-weight: 600; }

        /* FORUM UI */
        .qa-feed-header { margin-bottom: 1.5rem; padding-bottom:1rem; border-bottom: 2px solid #eee; }
        .forum-wrapper { display: grid; grid-template-columns: 1fr 1.5fr; gap: 2rem; align-items: start; }
        .form-card { background: var(--white); padding: 2rem; border-radius: 20px; box-shadow: var(--shadow); position: sticky; top: 100px; }
        .form-group { margin-bottom: 1.2rem; }
        .form-label { display: block; margin-bottom: 0.5rem; font-weight: 600; color: var(--text-dark); }
        .form-input, .form-textarea, .form-select { width: 100%; padding: 12px 15px; border: 1px solid #ddd; border-radius: 10px; font-family: 'Poppins', sans-serif; font-size: 0.95rem; transition: var(--transition); }
        .form-input:focus, .form-textarea:focus { outline: none; border-color: #FF6B6B; box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1); }
        .submit-btn { width: 100%; padding: 15px; background: var(--bright-gradient); color: white; border: none; border-radius: 50px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: var(--transition); box-shadow: 0 4px 15px rgba(255, 107, 107, 0.4); }
        .submit-btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255, 107, 107, 0.6); }

        /* COMMENTS CARDS */
        .qa-card { background: var(--white); border-radius: 15px; padding: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 4px 10px rgba(0,0,0,0.05); transition: var(--transition); position: relative; border: 1px solid transparent; }
        .qa-card:hover { box-shadow: 0 8px 20px rgba(0,0,0,0.1); }
        .qa-card.my-question { border: 2px solid var(--accent-me); background-color: #f9fff9; }
        .delete-btn { position: absolute; top: 15px; right: 15px; background: none; border: none; color: #ccc; cursor: pointer; font-size: 1rem; transition: var(--transition); padding: 5px; }
        .delete-btn:hover { color: #ff4d4d; transform: scale(1.1); }
        .qa-meta { display: flex; align-items: center; gap: 10px; margin-bottom: 10px; font-size: 0.9rem; color: var(--text-light); }
        .qa-avatar { width: 35px; height: 35px; background: #eee; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--text-light); }
        .qa-name { font-weight: 700; color: var(--text-dark); }
        .qa-question { font-weight: 500; font-size: 1.1rem; color: var(--text-dark); margin-bottom: 1rem; }
        .qa-replies-list { margin-top: 1rem; border-top: 1px solid #eee; padding-top: 1rem; }
        .reply-item { background: #fafafa; padding: 10px 15px; border-radius: 10px; margin-bottom: 0.8rem; border-left: 3px solid #ddd; font-size: 0.95rem; }
        .reply-item.my-reply { border-left-color: var(--accent-me); background: #f0fff4; }
        .reply-header { font-size: 0.8rem; color: #888; margin-bottom: 4px; display: flex; justify-content: space-between; }
        .reply-name { font-weight: 700; color: var(--text-dark); }
        .btn-reply { background: none; border: 1px solid #ddd; padding: 5px 15px; border-radius: 20px; cursor: pointer; font-size: 0.85rem; transition: var(--transition); margin-left: 45px; }
        .btn-reply:hover { background: #eee; color: var(--text-dark); }
        .reply-form-input-area { margin-top: 1rem; margin-left: 45px; display: none; }
        .reply-form-input-area.active { display: block; animation: fadeIn 0.3s; }

        /* ADMIN STYLES */
        .badge-admin {
            background-color: var(--admin-color); color: white; font-size: 0.65rem; font-weight: 800;
            padding: 2px 6px; border-radius: 4px; margin-left: 5px; vertical-align: middle;
        }

        /* FOOTER UPDATED */
        footer { 
            background-color: var(--white); 
            padding: 2.5rem 2rem; /* Padding standar agar lega */
            text-align: center; 
            border-top: 1px solid #eee; 
            margin-top: auto; 
        }
        .footer-content {
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 1rem;
        }
        .social-links { display: flex; gap: 1.5rem; }
        .social-links a {
            color: var(--text-light); font-size: 1.5rem; transition: var(--transition);
        }
        .social-links a:hover { color: var(--accent-toner); transform: scale(1.2); }

        /* --- RESPONSIVE MEDIA QUERIES --- */
        @media (max-width: 900px) { .forum-wrapper { grid-template-columns: 1fr; } .form-card { position: static; } }
        
        @media (max-width: 768px) { 
            .selection-container { grid-template-columns: 1fr; } 
            .hero-intro h1 { font-size: 2rem; } 
            .detail-image { height: 300px; } 
            .detail-content { padding: 2rem; } 
            
            nav.desktop-nav { display: none; } 
            .mobile-menu-btn { display: block; }
            #auth-section { display: flex; align-items: center; }
            
            /* Mobile Card adjustments */
            .card { height: 350px; } /* Sedikit lebih pendek di HP */
            .card h2 { font-size: 1.6rem; }
            .card p { font-size: 0.9rem; }
            
            /* Mobile Lab Grid adjustments */
            .lab-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <!-- Header -->
    <header>
        <div class="logo" onclick="navigateTo('home')">
            <i class="fas fa-leaf"></i> GlowSkin
        </div>
        
        <div class="header-right">
            <!-- Desktop Nav -->
            <nav class="desktop-nav">
                <a class="nav-link" onclick="navigateTo('toner')">Toner</a>
                <a class="nav-link" onclick="navigateTo('serum')">Serum</a>
                <a class="nav-link" onclick="navigateTo('toner-forum')">Diskusi Toner</a>
                <a class="nav-link" onclick="navigateTo('serum-forum')">Diskusi Serum</a>
            </nav>

            <!-- Auth Section -->
            <div id="auth-section">
                <button id="btn-login-nav" class="auth-btn" onclick="navigateTo('login')">Login</button>
                <div id="user-profile-nav" class="user-profile hidden">
                    <span id="display-name">User</span>
                    <span id="admin-badge-nav" class="badge-admin hidden">ADMIN</span>
                    <span class="logout-btn" onclick="handleLogout()"><i class="fas fa-sign-out-alt"></i></span>
                </div>
            </div>

            <!-- Mobile Menu Button -->
            <button class="mobile-menu-btn" onclick="toggleMenu()">
                <i class="fas fa-bars" id="menu-icon"></i>
            </button>
        </div>
    </header>

    <!-- Overlay Latar Belakang -->
    <div class="backdrop" id="backdrop" onclick="toggleMenu()"></div>

    <!-- Side Drawer Menu -->
    <div class="side-drawer" id="sideDrawer">
        <div class="drawer-close-btn" onclick="toggleMenu()">
            <i class="fas fa-times"></i>
        </div>
        
        <!-- Daftar Menu Berurutan -->
        <div style="padding: 20px;">
            <!-- Kategori: Navigasi -->
            <p style="color:#888; font-size:0.75rem; text-transform:uppercase; font-weight:700; margin-bottom:10px;">Navigasi</p>
            <ul class="drawer-menu-list">
                <li><a href="#" class="drawer-item" onclick="navigateTo('home'); toggleMenu()"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="#" class="drawer-item" onclick="navigateTo('toner'); toggleMenu()"><i class="fas fa-spray-can"></i> Toner</a></li>
                <li><a href="#" class="drawer-item" onclick="navigateTo('serum'); toggleMenu()"><i class="fas fa-flask"></i> Serum</a></li>
            </ul>

            <!-- Kategori: Diskusi -->
            <p style="color:#888; font-size:0.75rem; text-transform:uppercase; font-weight:700; margin:20px 0 10px;">Diskusi</p>
            <ul class="drawer-menu-list">
                <li><a href="#" class="drawer-item" onclick="navigateTo('toner-forum'); toggleMenu()">Diskusi Toner</a></li>
                <li><a href="#" class="drawer-item" onclick="navigateTo('serum-forum'); toggleMenu()">Diskusi Serum</a></li>
            </ul>
        </div>
    </div>

    <!-- VIEW 1: HOME (DIUBAH MENJADI SCROLL) -->
    <main id="view-home" class="fade-in">
        
        <!-- 1. INTRO SECTION (Paling Atas) -->
        <section class="hero-intro">
            <h1>GlowSkin <span>Indonesia</span></h1>
            <p>Solusi skincare alami dan terpercaya untuk merawat kecantikan sejati Anda. Dapatkan kulit sehat, bercahaya, dan penuh percaya diri.</p>
            <button class="btn-scroll" onclick="scrollToProducts()">Pilih Perawatan <i class="fas fa-chevron-down"></i></button>
        </section>

               <!-- 2. SELECTION SECTION (Tengah) - UPDATE GAMBAR -->
        <section id="products-section">
            <div class="selection-container">
                <!-- Card Toner -->
                <article class="card toner-card" onclick="navigateTo('toner')">
                    <!-- GANTI src="..." MENGGUNAKAN FOTO UKURAN 1022x818 -->
                    <div class="card-image">
                        <img src="LINK_FOTO_TONER_1022x818.jpg" alt="Bawi Toner">
                    </div>
                    <div class="card-content">
                        <i class="fas fa-spray-can card-icon"></i>
                        <h2>BAWI Toner</h2>
                        <p>Penyegar kulit untuk mengembalikan pH balance.</p>
                        <span class="btn-card">Lihat Detail</span>
                    </div>
                </article>
                
                <!-- Card Serum -->
                <article class="card serum-card" onclick="navigateTo('serum')">
                    <!-- GANTI src="..." MENGGUNAKAN FOTO UKURAN 1022x818 -->
                    <div class="card-image">
                        <img src="LINK_FOTO_SERUM_1022x818.jpg" alt="Tabela Serum">
                    </div>
                    <div class="card-content">
                        <i class="fas fa-flask card-icon"></i>
                        <h2>TABELA Serum</h2>
                        <p>Konsentrat nutrisi tinggi untuk kulit sehat bercahaya.</p>
                        <span class="btn-card">Lihat Detail</span>
                    </div>
                </article>
            </div>
        </section>

        <!-- 3. LAB SECTION (DIJADIKAN 2 SELECTION CLICKABLE) -->
        <section class="lab-section">
            <h2 class="section-title">Teruji Klinis & Aman</h2>
            <div class="lab-grid">
                
                <!-- PILIHAN 1: UJI LAB TONER -->
                <article class="lab-item toner-lab-item" onclick="navigateTo('lab-toner')">
                    <!-- Background Image (Optional generic lab bg) -->
                    <img src="https://picsum.photos/seed/lab/600/600" class="lab-bg-img" alt="Lab">
                    
                    <i class="fas fa-microscope lab-icon"></i>
                    <h3>Hasil Uji Lab Toner</h3>
                    <p>Analisa keamanan dan efektivitas Bawi Toner.</p>
                    
                    <div class="btn-lab-view">Lihat Data Toner</div>
                </article>
                
                <!-- PILIHAN 2: UJI LAB SERUM -->
                <article class="lab-item serum-lab-item" onclick="navigateTo('lab-serum')">
                    <img src="https://picsum.photos/seed/lab2/600/600" class="lab-bg-img" alt="Lab">
                    
                    <i class="fas fa-flask lab-icon"></i>
                    <h3>Hasil Uji Lab Serum</h3>
                    <p>Analisa komposisi Vitamin C dan efektivitas Tabela Serum.</p>
                    
                    <div class="btn-lab-view">Lihat Data Serum</div>
                </article>
            </div>
        </section>

        <!-- 4. TESTIMONI SECTION (Paling Bawah) -->
        <section class="testi-section">
            <h2 class="section-title">Kata Mereka</h2>
            <div class="testi-grid">
                <div class="testi-card">
                    <img src="https://picsum.photos/seed/user1/200/200" alt="User" class="testi-avatar">
                    <p class="testi-text">"Suka banget sama Bawi Toner! Jerawatku berkurang drastis dalam seminggu. Bakal langganan terus."</p>
                    <div class="testi-name">Siti Aminah</div>
                </div>
                <div class="testi-card">
                    <img src="https://picsum.photos/seed/user2/200/200" alt="User" class="testi-avatar">
                    <p class="testi-text">"Serum Tabela itu best banget. Kulitku jadi cerah dan glowing kayak habis facial."</p>
                    <div class="testi-name">Rina Mariani</div>
                </div>
                <div class="testi-card">
                    <img src="https://picsum.photos/seed/user3/200/200" alt="User" class="testi-avatar">
                    <p class="testi-text">"Pelayanan memuaskan dan produknya cepat bereaksi. GlowSkin emang juara!"</p>
                    <div class="testi-name">Dinda Kirana</div>
                </div>
            </div>
        </section>
    </main>

    <!-- VIEW 2: TONER DETAIL -->
    <section id="view-toner" class="product-page hidden fade-in">
        <div class="detail-container">
            <div class="detail-image"><img src="https://raw.githubusercontent.com/chiiyoriez/testbed-website-KIR/refs/heads/main/KIR/bawi%20toner/WhatsApp%20Image%202026-01-08%20at%2021.48.36.jpeg" alt="Detail Toner"></div>
            <div class="detail-content">
                <div class="back-btn" onclick="navigateTo('home')"><i class="fas fa-arrow-left"></i> Kembali ke Menu</div>
                <h2>BAWI TONER</h2>
                <span class="detail-price">Rp 40.000</span>
                <p class="detail-desc">Inspired by natural 'Bawi Kuwu' treatments, this toner blends Taya stem, Dayak onion, Bajakah water, and Pandan leaves. Natural solution for acne-prone skin.</p>
                <div class="feature-grid">
                    <div class="feature-item"><i class="fas fa-check-circle"></i> Acne Prone Skin</div>
                    <div class="feature-item"><i class="fas fa-check-circle"></i> Sensitive Skin</div>
                    <div class="feature-item"><i class="fas fa-check-circle"></i> Calming Redness</div>
                    <div class="feature-item"><i class="fas fa-check-circle"></i> 20ml</div>
                </div>
                <button class="action-btn" onclick="navigateTo('toner-forum')">Lihat Diskusi Toner</button>
            </div>
        </div>
    </section>

    <!-- VIEW 3: SERUM DETAIL -->
    <section id="view-serum" class="product-page hidden fade-in">
        <div class="detail-container">
            <div class="detail-image"><img src="https://raw.githubusercontent.com/chiiyoriez/testbed-website-KIR/refs/heads/main/KIR/tabela%20serum/download%20(1).png" alt="Detail Serum"></div>
            <div class="detail-content">
                <div class="back-btn" onclick="navigateTo('home')"><i class="fas fa-arrow-left"></i> Kembali ke Menu</div>
                <h2>TABELA Serum</h2>
                <span class="detail-price">Rp 10.000</span>
                <p class="detail-desc">Serum wajah dengan kandungan Vitamin C dan Niacinamide untuk mencerahkan kulit dan menyamarkan noda hitam. Teksturnya ringan dan cepat menyerap.</p>
                <div class="feature-grid">
                    <div class="feature-item"><i class="fas fa-check-circle"></i> Brightening</div>
                    <div class="feature-item"><i class="fas fa-check-circle"></i> Anti Aging</div>
                    <div class="feature-item"><i class="fas fa-check-circle"></i> Vitamin C 20%</div>
                    <div class="feature-item"><i class="fas fa-check-circle"></i> 10ml</div>
                </div>
                <button class="action-btn" onclick="navigateTo('serum-forum')">Lihat Diskusi Serum</button>
            </div>
        </div>
    </section>

        <!-- VIEW 8: LAB TONER DETAIL (UPDATED AUTO HEIGHT) -->
    <section id="view-lab-toner" class="product-page hidden fade-in">
        <div class="detail-container">
            <!-- FOTO VERTICAL STACK (KIRI) -->
            <div class="detail-image" style="padding: 10px;">
                <div class="lab-photo-grid">
                    <!-- Foto 1 (720x396) -->
                    <div class="lab-photo-item">
                        <img src="KIR/bawi toner/table 1.jpeg" width="100%" height="auto" alt="Foto 1">
                        <div class="lab-photo-caption">Visual Produk (Toner)</div>
                    </div>
                    <!-- Foto 2 (720x322) -->
                    <div class="lab-photo-item">
                        <img src="KIR/bawi toner/table 2.jpeg" width="100%" height="auto" alt="Foto 2">
                        <div class="lab-photo-caption">Sampel Uji Mikrobiologi</div>
                    </div>
                    <!-- Foto 3 (720x396) -->
                    <div class="lab-photo-item">
                        <img src="KIR/bawi toner/fig 2.jpeg" width="100%" height="auto" alt="Foto 3">
                        <div class="lab-photo-caption">Tabel Hasil pH</div>
                    </div>
                    <!-- Foto 4 (720x271) -->
                    <div class="lab-photo-item">
                        <img src="KIR/bawi toner/table 3.jpeg" width="100%" height="auto" alt="Foto 4">
                        <div class="lab-photo-caption">Hasil Uji Iritasi (Patch)</div>
                    </div>
                    <!-- Foto 5 (720x156) -->
                    <div class="lab-photo-item">
                        <img src="KIR/bawi toner/table 4.jpeg" width="100%" height="auto" alt="Foto 5">
                        <div class="lab-photo-caption">Analisa HPLC</div>
                    </div>
                    <!-- Foto 6 (720x330) -->
                    <div class="lab-photo-item">
                        <img src="KIR/bawi toner/table 4 juga.jpeg" width="100%" height="auto" alt="Foto 6">
                        <div class="lab-photo-caption">Deklarasi Lulus (BPOM)</div>
                    </div>
                </div>
            </div>
            
            <div class="detail-content">
                <div class="back-btn" onclick="navigateTo('home')"><i class="fas fa-arrow-left"></i> Kembali ke Menu</div>
                <h2 style="color: var(--accent-toner-dark);">Laporan Uji Lab Bawi Toner</h2>
                <div style="display: inline-block; padding: 5px 15px; background: #e0e0e0; border-radius: 5px; margin-bottom: 2rem; font-size: 0.9rem;">
                    <i class="fas fa-calendar-alt"></i> Tes: 15 Januari 2025
                </div>
                <p class="detail-desc">
                    Bawi Toner telah melalui serangkaian tes dermatologi dan mikrobiologi yang ketat. Produk dinyatakan **AMAN** untuk penggunaan jangka panjang pada kulit berjerawat dan sensitif.
                </p>

                <!-- 6 TABEL HASIL UJI LAB -->
                <h3 style="margin-bottom: 1rem; font-size: 1.5rem; color: var(--text-dark);">Hasil Uji Laboratorium</h3>

                <!-- Tabel 1: pH -->
                <table class="lab-table">
                    <tr><th>Parameter</th><th>Hasil</th></tr>
                    <tr><td>pH Larutan</td><td class="result-pass">4.5 (Sangat Cocok)</td></tr>
                    <tr><td>pH Kulit Setelah Aplikasi</td><td>5.5</td></tr>
                </table>

                <!-- Tabel 2: Mikrobiologi -->
                <table class="lab-table">
                    <tr><th>Uji Bakteri</th><th>Hasil</th></tr>
                    <tr><td>Total Plate Count (TPC)</td><td class="result-pass">< 100 CFU/g (Sangat Aman)</td></tr>
                    <tr><td>Patogen (Staphylococcus, dll)</td><td class="result-pass">Tidak Ditemukan</td></tr>
                </table>

                <!-- Tabel 3: Iritasi Kulit -->
                <table class="lab-table">
                    <tr><th>Tes Iritasi</th><th>Hasil</th></tr>
                    <tr><td>Uji Patch (48 Jam)</td><td class="result-pass">Tanpa Eritasi (Score: 0)</td></tr>
                    <tr><td>Uji Mata Kelinci (Draize)</td><td class="result-pass">Non-Iritant</td></tr>
                </table>

                <!-- Tabel 4: Analisa Kandungan -->
                <table class="lab-table">
                    <tr><th>Komponen</th><th>Kadar (%)</th></tr>
                    <tr><td>Ekstrak Bajakah</td><td>5%</td></tr>
                    <tr><td>Ekstrak Bawang Putih</td><td>3%</td></tr>
                    <tr><td>Air Daun Pandan</td><td>92%</td></tr>
                </table>

                <!-- Tabel 5: Stabilitas -->
                <table class="lab-table">
                    <tr><th>Suhu Penyimpanan</th><th>Ketentuan</th></tr>
                    <tr><td>40°C ± 2°C</td><td class="result-pass">Stabil 6 Bulan</td></tr>
                </table>

                <!-- Tabel 6: Kesimpulan Akhir -->
                <table class="lab-table">
                    <tr><th>Kesimpulan</th><th>Status</th></tr>
                    <tr><td>Aman untuk penggunaan luar</td><td class="result-pass">LULUS</td></tr>
                    <tr><td>Aman untuk kulit sensitif</td><td class="result-pass">LULUS</td></tr>
                </table>

                <button class="action-btn" style="background-color: var(--accent-toner); margin-top: 1rem;" onclick="navigateTo('toner')">Pesan Bawi Toner</button>
            </div>
        </div>
    </section>

    <!-- VIEW 9: LAB SERUM DETAIL (UPDATED AUTO HEIGHT) -->
    <section id="view-lab-serum" class="product-page hidden fade-in">
        <div class="detail-container">
            <!-- FOTO VERTICAL STACK (KIRI) -->
            <div class="detail-image" style="padding: 10px;">
                <div class="lab-photo-grid">
                    <!-- Foto 1 (720x396) -->
                    <div class="lab-photo-item">
                        <img src="https://picsum.photos/seed/serum1/800/600" width="100%" height="auto" alt="Foto 1">
                        <div class="lab-photo-caption">Visual Produk (Serum)</div>
                    </div>
                    <!-- Foto 2 (720x322) -->
                    <div class="lab-photo-item">
                        <img src="https://picsum.photos/seed/serum2/800/600" width="100%" height="auto" alt="Foto 2">
                        <div class="lab-photo-caption">Sampel Uji UV-Vis</div>
                    </div>
                    <!-- Foto 3 (720x396) -->
                    <div class="lab-photo-item">
                        <img src="https://picsum.photos/seed/serum3/800/600" width="100%" height="auto" alt="Foto 3">
                        <div class="lab-photo-caption">Grafik Brightening (ITA)</div>
                    </div>
                    <!-- Foto 4 (720x271) -->
                    <div class="lab-photo-item">
                        <img src="https://picsum.photos/seed/serum4/800/600" width="100%" height="auto" alt="Foto 4">
                        <div class="lab-photo-caption">Alat Viscositas</div>
                    </div>
                    <!-- Foto 5 (720x156) -->
                    <div class="lab-photo-item">
                        <img src="https://picsum.photos/seed/serum5/800/600" width="100%" height="auto" alt="Foto 5">
                        <div class="lab-photo-caption">Hasil Uji Mikroba</div>
                    </div>
                    <!-- Foto 6 (720x330) -->
                    <div class="lab-photo-item">
                        <img src="https://picsum.photos/seed/serum6/800/600" width="100%" height="auto" alt="Foto 6">
                        <div class="lab-photo-caption">Sertifikat Halal & BPOM</div>
                    </div>
                </div>
            </div>
            
            <div class="detail-content">
                <div class="back-btn" onclick="navigateTo('home')"><i class="fas fa-arrow-left"></i> Kembali ke Menu</div>
                <h2 style="color: var(--accent-serum-dark);">Laporan Uji Lab Tabela Serum</h2>
                <div style="display: inline-block; padding: 5px 15px; background: #e0e0e0; border-radius: 5px; margin-bottom: 2rem; font-size: 0.9rem;">
                    <i class="fas fa-calendar-alt"></i> Tes: 20 Januari 2025
                </div>
                <p class="detail-desc">
                    Tabela Serum diformulasikan dengan konsentrasi Vitamin C yang stabil. Uji laboratorium mengonfirmasi stabilitas kandungan dan efektivitas pencerahan tanpa iritasi signifikan.
                </p>

                <!-- 6 TABEL HASIL UJI LAB -->
                <h3 style="margin-bottom: 1rem; font-size: 1.5rem; color: var(--text-dark);">Hasil Uji Laboratorium</h3>

                <!-- Tabel 1: Stabilitas Vitamin C -->
                <table class="lab-table">
                    <tr><th>Metode</th><th>Kadar Awal</th><th>Kadar Akhir (30 Hari)</th></tr>
                    <tr><td>Spektrofotometri (UV)</td><td>20%</td><td class="result-pass">19.8% (Stabil)</td></tr>
                    <tr><td>Metode HPLC</td><td>20%</td><td class="result-pass">20.1% (Stabil)</td></tr>
                </table>

                <!-- Tabel 2: Uji Brightening -->
                <table class="lab-table">
                    <tr><th>Indeks Kecerahan</th><th>Subjek (n=50)</th><th>Peningkatan</th></tr>
                    <tr><td>ITA (L*)</td><td>50</td><td class="result-pass">+15.2%</td></tr>
                    <tr><td>ITA (a*)</td><td>50</td><td class="result-pass">+14.8%</td></tr>
                </table>

                <!-- Tabel 3: Uji Kelembapan -->
                <table class="lab-table">
                    <tr><th>Parameter</th><th>Nilai</th></tr>
                    <tr><td>Viskositas (cps)</td><td>5,500</td></tr>
                    <tr><td>Konsistensi (Pas)</td><td class="result-pass">Lulus</td></tr>
                    <tr><td>Penyebaran (cm)</td><td>5.5</td></tr>
                </table>

                <!-- Tabel 4: Tantangan Mikroba -->
                <table class="lab-table">
                    <tr><th>Mikroba</th><th>Batas Maksimum (log CFU)</th><th>Hasil</th></tr>
                    <tr><td>Total Aerob</td><td>10^3</td><td class="result-pass">< 10 CFU</td></tr>
                    <tr><td>Yeast & Mold</td><td>10^2</td><td class="result-pass">< 10 CFU</td></tr>
                    <tr><td>E. Coli</td><td>10</td><td class="result-pass">Negatif</td></tr>
                </table>

                <!-- Tabel 5: Uji Iritasi -->
                <table class="lab-table">
                    <tr><th>Tes</th><th>Skor (0-4)</th><th>Status</th></tr>
                    <tr><td>Eritasi Primer (Draize)</td><td>0</td><td class="result-pass">Non-Iritant</td></tr>
                    <tr><td>Sensitifitas Kulit (Erythema)</td><td>0.5</td><td class="result-pass">Minimal</td></tr>
                </table>

                <!-- Tabel 6: Status BPOM -->
                <table class="lab-table">
                    <tr><th>Dokumen</th><th>Status</th></tr>
                    <tr><td>Nomor Notifikasi</td><td class="result-pass">NA 18202001234</td></tr>
                    <tr><td>Cara Penyajaman</td><td class="result-pass">Aman Digunakan</td></tr>
                </table>

                <button class="action-btn" style="background-color: var(--accent-serum); margin-top: 1rem;" onclick="navigateTo('serum')">Pesan Tabela Serum</button>
            </div>
        </div>
    </section>

    <!-- VIEW 4: FORUM TONER -->
    <section id="view-toner-forum" class="product-page hidden fade-in">
        <div style="padding-bottom: 2rem;">
            <div class="back-btn" onclick="navigateTo('toner')"><i class="fas fa-arrow-left"></i> Kembali ke Produk Toner</div>
            
            <div class="qa-feed-header" style="border-bottom-color: var(--accent-toner);">
                <h2 style="color: var(--accent-toner-dark);">Diskusi Bawi Toner</h2>
                <p style="color: var(--text-light);">Khusus tanya jawab seputar Bawi Toner.</p>
            </div>

            <div class="forum-wrapper">
                <div class="form-card">
                    <h3 style="margin-bottom: 1.5rem;">Ajukan Pertanyaan (Toner)</h3>
                    <form id="qaForm-toner" onsubmit="postQuestion(event, 'Bawi Toner')">
                        <div class="form-group">
                            <label class="form-label">Nama</label>
                            <input type="text" id="askerName-toner" class="form-input" placeholder="Tulis nama Anda..." required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Produk</label>
                            <select id="askProduct-toner" class="form-select" disabled><option value="Bawi Toner" selected>Bawi Toner</option></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pertanyaan</label>
                            <textarea id="askContent-toner" class="form-textarea" rows="4" placeholder="Tanya seputar Toner..." required></textarea>
                        </div>
                        <button type="submit" class="submit-btn">Kirim ke Forum Toner <i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
                <div class="qa-feed" id="qaFeed-toner"></div>
            </div>
        </div>
    </section>

    <!-- VIEW 5: FORUM SERUM -->
    <section id="view-serum-forum" class="product-page hidden fade-in">
        <div style="padding-bottom: 2rem;">
            <div class="back-btn" onclick="navigateTo('serum')"><i class="fas fa-arrow-left"></i> Kembali ke Produk Serum</div>
            
            <div class="qa-feed-header" style="border-bottom-color: var(--accent-serum);">
                <h2 style="color: var(--accent-serum-dark);">Diskusi Tabela Serum</h2>
                <p style="color: var(--text-light);">Khusus tanya jawab seputar Tabela Serum.</p>
            </div>

            <div class="forum-wrapper">
                <div class="form-card">
                    <h3 style="margin-bottom: 1.5rem;">Ajukan Pertanyaan (Serum)</h3>
                    <form id="qaForm-serum" onsubmit="postQuestion(event, 'Tabela Serum')">
                        <div class="form-group">
                            <label class="form-label">Nama</label>
                            <input type="text" id="askerName-serum" class="form-input" placeholder="Tulis nama Anda..." required>
                        </div>

                        <div class="form-group">
                            <label class="form-label">Produk</label>
                            <select id="askProduct-serum" class="form-select" disabled><option value="Tabela Serum" selected>Tabela Serum</option></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Pertanyaan</label>
                            <textarea id="askContent-serum" class="form-textarea" rows="4" placeholder="Tanya seputar Serum..." required></textarea>
                        </div>
                        <button type="submit" class="submit-btn">Kirim ke Forum Serum <i class="fas fa-paper-plane"></i></button>
                    </form>
                </div>
                <div class="qa-feed" id="qaFeed-serum"></div>
            </div>
        </div>
    </section>

    <!-- VIEW 6: LOGIN -->
    <section id="view-login" class="hidden fade-in">
        <div class="auth-container">
            <h2>Login Akun</h2>
            <p style="font-size:0.8rem; color:#888; margin-bottom:1rem;">
                Gunakan email <strong>admin@glowskin.com</strong> untuk login sebagai Admin.
            </p>
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="login-email" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="login-pass" class="form-input" required>
                </div>
                <button type="submit" class="primary-btn">Masuk</button>
            </form>
            <div class="auth-switch">
                Belum punya akun? <a onclick="navigateTo('register')">Daftar disini</a>
            </div>
        </div>
    </section>

    <!-- VIEW 7: REGISTER -->
    <section id="view-register" class="hidden fade-in">
        <div class="auth-container">
            <h2>Daftar Akun Baru</h2>
            <form onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label class="form-label">Nama Panggilan</label>
                    <input type="text" id="reg-name" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" id="reg-email" class="form-input" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" id="reg-pass" class="form-input" required>
                </div>
                <button type="submit" class="primary-btn">Daftar</button>
            </form>
            <div class="auth-switch">
                Sudah punya akun? <a onclick="navigateTo('login')">Login disini</a>
            </div>
        </div>
    </section>

    <!-- FOOTER (UPDATED) -->
    <footer>
        <div class="footer-content">
            <p>&copy; Sejak 2025 GlowSkin Indonesia</p>
            <!-- Social Links -->
            <div class="social-links">
                <a href="mailto:contact@glowskin.com" title="Gmail"><i class="fas fa-envelope"></i></a>
                <a href="https://instagram.com" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
    </footer>

    <script>
        // ==========================================
        // 1. KONFIGURASI FIREBASE & ADMIN
        // ==========================================
        const firebaseConfig = {
            apiKey: "AIzaSyChfGHmmnynHcIrspY17--RVKMyj609HUg",
            authDomain: "web-kir.firebaseapp.com",
            databaseURL: "https://web-kir-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "web-kir",
            storageBucket: "web-kir.firebasestorage.app",
            messagingSenderId: "924508236082",
            appId: "1:924508236082:web:73ea433f8e0c6204934f2b",
            measurementId: "G-Y5RVQQ2FQ9"
        };

        const ADMIN_EMAIL = "admin@glowskin.com"; 
        
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth(); 

        let questions = [];
        let currentUser = null; 

        // ==========================================
        // 2. AUTH STATE & UI UPDATE
        // ==========================================
        auth.onAuthStateChanged((user) => {
            currentUser = user;
            updateAuthUI(user);
        });

        function isAdmin() {
            return currentUser && currentUser.email === ADMIN_EMAIL;
        }

        function updateAuthUI(user) {
            const loginBtnNav = document.getElementById('btn-login-nav');
            const profileDivNav = document.getElementById('user-profile-nav');
            const displayNameNav = document.getElementById('display-name');
            const adminBadgeNav = document.getElementById('admin-badge-nav');
            
            const nameInputToner = document.getElementById('askerName-toner');
            const nameInputSerum = document.getElementById('askerName-serum');

            if (user) {
                loginBtnNav.classList.add('hidden');
                profileDivNav.classList.remove('hidden');
                
                const nameToShow = user.displayName || user.email.split('@')[0];
                displayNameNav.innerText = nameToShow;

                if(isAdmin()) {
                    adminBadgeNav.classList.remove('hidden');
                    if(nameInputToner && nameInputToner.value === "") nameInputToner.value = "Admin GlowSkin";
                    if(nameInputSerum && nameInputSerum.value === "") nameInputSerum.value = "Admin GlowSkin";
                } else {
                    adminBadgeNav.classList.add('hidden');
                    if(nameInputToner && nameInputToner.value === "") nameInputToner.value = nameToShow;
                    if(nameInputSerum && nameInputSerum.value === "") nameInputSerum.value = nameToShow;
                }

            } else {
                loginBtnNav.classList.remove('hidden');
                profileDivNav.classList.add('hidden');
                adminBadgeNav.classList.add('hidden');
                
                if(nameInputToner) nameInputToner.value = "";
                if(nameInputSerum) nameInputSerum.value = "";
            }
        }

        // Scroll ke Produk
        function scrollToProducts() {
            document.getElementById('products-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Toggle Side Drawer Menu
        function toggleMenu() {
            const drawer = document.getElementById('sideDrawer');
            const backdrop = document.getElementById('backdrop');
            const icon = document.getElementById('menu-icon');
            
            drawer.classList.toggle('active');
            backdrop.classList.toggle('active');

            // Ubah icon
            if (drawer.classList.contains('active')) {
                icon.classList.remove('fa-bars');
                icon.classList.add('fa-times');
            } else {
                icon.classList.remove('fa-times');
                icon.classList.add('fa-bars');
            }
        }

        // ==========================================
        // 3. FUNGSI LOGIN & REGISTER
        // ==========================================
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-pass').value;

            auth.signInWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    alert("Login Berhasil! Selamat datang " + (isAdmin() ? "Admin" : "User"));
                    navigateTo('home');
                })
                .catch((error) => {
                    alert("Login Gagal: " + error.message);
                });
        }

        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('reg-name').value;
            const email = document.getElementById('reg-email').value;
            const password = document.getElementById('reg-pass').value;

            auth.createUserWithEmailAndPassword(email, password)
                .then((userCredential) => {
                    userCredential.user.updateProfile({ displayName: name })
                        .then(() => {
                            alert("Registrasi Berhasil! Selamat Datang, " + name);
                            navigateTo('home');
                        });
                })
                .catch((error) => {
                    alert("Registrasi Gagal: " + error.message);
                });
        }

        function handleLogout() {
            if(confirm("Yakin ingin logout?")) {
                auth.signOut()
                    .then(() => {
                        navigateTo('home');
                    });
            }
        }

        // ==========================================
        // 4. LISTEN KE DATABASE
        // ==========================================
        function listenToDatabase() {
            const questionsRef = database.ref('questions');
            
            questionsRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    questions = Object.keys(data).map(key => data[key]);
                    questions.sort((a, b) => b.timestamp - a.timestamp);
                    
                    const activeView = document.querySelector('section:not(.hidden)').id;
                    if (activeView === 'view-toner-forum') renderFeed('Bawi Toner');
                    if (activeView === 'view-serum-forum') renderFeed('Tabela Serum');
                } else {
                    questions = [];
                }
            });
        }

        // ==========================================
        // 5. NAVIGASI
        // ==========================================
        function navigateTo(viewName) {
            // Tutup menu jika sedang terbuka
            const drawer = document.getElementById('sideDrawer');
            if(drawer.classList.contains('active')) toggleMenu();

            const views = [
                'view-home', 
                'view-toner', 
                'view-serum', 
                'view-toner-forum', 
                'view-serum-forum', 
                'view-lab-toner', // <--- Tambahkan ini
                'view-lab-serum', // <--- Tambahkan ini
                'view-login', 
                'view-register'
            ];

            // Sembunyikan semua
            views.forEach(id => document.getElementById(id).classList.add('hidden'));

            if (viewName === 'toner') {
                document.getElementById('view-toner').classList.remove('hidden');
            } 
            else if (viewName === 'serum') {
                document.getElementById('view-serum').classList.remove('hidden');
            } 
            else if (viewName === 'lab-toner') {
                // Tampilkan Halaman Lab Toner
                document.getElementById('view-lab-toner').classList.remove('hidden');
            } 
            else if (viewName === 'lab-serum') {
                // Tampilkan Halaman Lab Serum
                document.getElementById('view-lab-serum').classList.remove('hidden');
            } 
            else if (viewName === 'toner-forum') {
                document.getElementById('view-toner-forum').classList.remove('hidden');
                renderFeed('Bawi Toner');
            } 
            else if (viewName === 'serum-forum') {
                document.getElementById('view-serum-forum').classList.remove('hidden');
                renderFeed('Tabela Serum');
            } 
            else if (viewName === 'login') {
                if(currentUser) { alert("Anda sudah login!"); return; }
                document.getElementById('view-login').classList.remove('hidden');
            } 
            else if (viewName === 'register') {
                if(currentUser) { alert("Anda sudah login!"); return; }
                document.getElementById('view-register').classList.remove('hidden');
            } 
            else {
                // Default: Home
                document.getElementById('view-home').classList.remove('hidden');
            }
            
            // Scroll ke atas
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // ==========================================
        // 6. RENDER FORUM
        // ==========================================
        function renderFeed(productFilter) {
            let containerId = productFilter === 'Bawi Toner' ? 'qaFeed-toner' : 'qaFeed-serum';
            const feedContainer = document.getElementById(containerId);
            feedContainer.innerHTML = ''; 

            const filteredQuestions = questions.filter(q => q.product === productFilter);

            if(filteredQuestions.length === 0) {
                feedContainer.innerHTML = '<p style="text-align:center; color:#999; padding:2rem;">Belum ada diskusi untuk produk ini.</p>';
                return;
            }

            const currentUserIsAdmin = isAdmin();

            filteredQuestions.forEach((q) => {
                const isMyQuestion = (currentUser && q.userEmail === currentUser.email);
                const isAuthorAdmin = (q.userEmail === ADMIN_EMAIL);
                const canDelete = isMyQuestion || currentUserIsAdmin;

                const questionClass = isMyQuestion ? 'qa-card my-question' : 'qa-card';
                const adminBadge = isAuthorAdmin ? '<span class="badge-admin">ADMIN</span>' : '';
                
                let repliesHTML = '';
                if (q.replies) {
                    const replyList = Object.keys(q.replies).map(key => q.replies[key]);
                    replyList.forEach(r => {
                        const isMyReply = (currentUser && r.userEmail === currentUser.email);
                        const isReplyAuthorAdmin = (r.userEmail === ADMIN_EMAIL);
                        const replyClass = isMyReply ? 'reply-item my-reply' : 'reply-item';
                        const replyAdminBadge = isReplyAuthorAdmin ? '<span class="badge-admin">ADMIN</span>' : '';

                        repliesHTML += `
                            <div class="${replyClass}">
                                <div class="reply-header">
                                    <span class="reply-name">${r.name} ${replyAdminBadge}</span>
                                    <span>${r.date}</span>
                                </div>
                                <div>${r.text}</div>
                            </div>
                        `;
                    });
                }

                const deleteBtnHtml = canDelete ? 
                    `<button class="delete-btn" onclick="deleteQuestion(${q.id})"><i class="fas fa-trash-alt"></i></button>` : '';

                const html = `
                    <div class="${questionClass}">
                        ${isMyQuestion ? '<div style="position:absolute; top:-10px; left:20px; background:var(--accent-me); color:white; padding:2px 10px; font-size:0.7rem; border-radius:10px;">Pertanyaan Anda</div>' : ''}
                        
                        ${deleteBtnHtml}

                        <div class="qa-meta">
                            <div class="qa-avatar"><i class="fas fa-user"></i></div>
                            <div>
                                <span class="qa-name">${q.name} ${adminBadge}</span> • <span style="font-size: 0.8rem; color: #999;">${q.date}</span>
                                <div style="font-size: 0.75rem; background: ${getProductColor(q.product)}; color: white; padding: 2px 8px; border-radius: 4px; display: inline-block; margin-left: 5px;">${q.product}</div>
                            </div>
                        </div>
                        <div class="qa-question" style="${isMyQuestion ? 'color:var(--accent-me);' : ''}">${q.question}</div>

                        <div class="qa-replies-list">
                            ${repliesHTML}
                        </div>

                        <div class="reply-form-input-area" id="replyForm-${q.id}">
                            <input type="text" id="replyText-${q.id}" class="form-input" placeholder="Tulis balasanmu..." style="margin-bottom: 5px;">
                            <button onclick="submitReply(${q.id})" class="btn-card" style="font-size: 0.8rem; padding: 5px 15px; background-color: var(--accent-toner);">Kirim Balasan</button>
                        </div>
                        <button onclick="toggleReply(${q.id})" class="btn-reply"><i class="fas fa-reply"></i> Balas</button>
                    </div>
                `;
                feedContainer.innerHTML += html;
            });
        }

        function getProductColor(product) {
            if (product.includes('Toner')) return '#9e8fb2';
            if (product.includes('Serum')) return '#e6a4a4';
            return '#999';
        }

        // ==========================================
        // 7. AKSI POST
        // ==========================================
        function postQuestion(e, productName) {
            e.preventDefault();
            
            const nameId = productName === 'Bawi Toner' ? 'askerName-toner' : 'askerName-serum';
            const contentId = productName === 'Bawi Toner' ? 'askContent-toner' : 'askContent-serum';
            
            const nameVal = document.getElementById(nameId).value;
            const content = document.getElementById(contentId).value;

            if (!nameVal.trim()) { alert("Nama harus diisi!"); return; }

            const userEmail = currentUser ? currentUser.email : "guest@example.com";

            const newQuestion = {
                id: Date.now(),
                timestamp: Date.now(),
                name: nameVal, 
                userEmail: userEmail, 
                product: productName,
                question: content,
                replies: [],
                date: "Baru saja"
            };

            database.ref('questions').push(newQuestion);
            document.getElementById(contentId).value = '';
            alert("Pertanyaan berhasil dikirim!");
        }

        function submitReply(qId) {
            if (!currentUser) { alert("Anda harus Login dulu untuk membalas!"); navigateTo('login'); return; }

            const input = document.getElementById(`replyText-${qId}`);
            const replyText = input.value;

            if (replyText.trim() !== "") {
                database.ref('questions').orderByChild('id').equalTo(qId).once('value', snapshot => {
                    if (snapshot.exists()) {
                        const key = Object.keys(snapshot.val())[0];
                        const newReply = {
                            name: currentUser.displayName || "User",
                            userEmail: currentUser.email,
                            text: replyText,
                            date: "Baru saja"
                        };
                        database.ref('questions/' + key + '/replies').push(newReply);
                        
                        input.value = '';
                        const form = document.getElementById(`replyForm-${q.id}`);
                        form.style.display = 'none';
                    }
                });
            }
        }

        function deleteQuestion(qId) {
            if (!currentUser) return;

            if (isAdmin()) {
                if (confirm("Anda adalah Admin. Hapus pertanyaan ini?")) {
                    performDelete(qId);
                }
                return;
            }

            const qIndex = questions.findIndex(q => q.id === qId);
            if(qIndex > -1 && questions[qIndex].userEmail !== currentUser.email) {
                alert("Anda tidak bisa menghapus pertanyaan orang lain!");
                return;
            }

            if (confirm("Hapus pertanyaan ini?")) {
                performDelete(qId);
            }
        }

        function performDelete(qId) {
            database.ref('questions').orderByChild('id').equalTo(qId).once('value', snapshot => {
                snapshot.forEach(child => {
                    child.ref.remove();
                });
            });
        }

        function toggleReply(qId) {
            if (!currentUser) { alert("Anda harus Login dulu!"); navigateTo('login'); return; }
            
            const form = document.getElementById(`replyForm-${qId}`);
            if (form.style.display === 'block') {
                form.style.display = 'none';
            } else {
                form.style.display = 'block';
                document.getElementById(`replyText-${qId}`).focus();
            }
        }

        listenToDatabase();

    </script>
</body>
</html>






